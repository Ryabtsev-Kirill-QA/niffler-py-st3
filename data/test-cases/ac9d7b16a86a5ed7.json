{"uid":"ac9d7b16a86a5ed7","name":"Редактирование названия категории через UI","fullName":"tests.ui.test_categories.TestCategory#test_edit_category_name_ui","historyId":"9dfd37705f92c623cdc129f43693400d","time":{"start":1771492212709,"stop":1771492212709,"duration":0},"status":"broken","statusMessage":"playwright._impl._errors.Error: Page.goto: net::ERR_NAME_NOT_RESOLVED at http://localhost:9000/\nCall log:\n  - navigating to \"http://localhost:9000/\", waiting until \"load\"","statusTrace":"browser = <Browser type=<BrowserType name=chromium executable_path=/home/runner/.cache/ms-playwright/chromium-1194/chrome-linux/chrome> version=141.0.7390.37>\nenvs = Envs(frontend_url='http://localhost', api_url='http://localhost:8090', auth_url='http://localhost:9000', spend_db_url=...localhost:8089/ws/userdata', kafka_address='localhost:9093', niffler_username='test_user', niffler_password='password')\ntmp_path_factory = TempPathFactory(_given_basetemp=None, _trace=<pluggy._tracing.TagTracerSub object at 0x7ff7a2b09a00>, _basetemp=PosixPath('/tmp/pytest-of-runner/pytest-0'), _retention_count=3, _retention_policy='all')\n\n    @pytest.fixture(scope=\"session\")\n    def setup_auth_state(browser: Browser, envs, tmp_path_factory):\n        \"\"\"Автоматически создает файл с состоянием авторизации перед всеми тестами\"\"\"\n        temp_dir = tmp_path_factory.mktemp(\"auth_data\")\n        state_path = temp_dir / \"niffler_user.json\"\n    \n        context = browser.new_context()\n        page = context.new_page()\n    \n        login_page = LoginPage(page)\n>       login_page.go_to(envs.auth_url)\n\nconftest.py:54: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \npages/base_page.py:9: in go_to\n    self.page.goto(url)\n../../../../.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/playwright/sync_api/_generated.py:9019: in goto\n    self._sync(\n../../../../.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/playwright/_impl/_page.py:555: in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n../../../../.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/playwright/_impl/_frame.py:153: in goto\n    await self._channel.send(\n../../../../.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/playwright/_impl/_connection.py:69: in send\n    return await self._connection.wrap_api_call(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <playwright._impl._connection.Connection object at 0x7ff7a05fea50>\ncb = <function Channel.send.<locals>.<lambda> at 0x7ff78c7177e0>\nis_internal = False, title = None\n\n    async def wrap_api_call(\n        self, cb: Callable[[], Any], is_internal: bool = False, title: str = None\n    ) -> Any:\n        if self._api_zone.get():\n            return await cb()\n        task = asyncio.current_task(self._loop)\n        st: List[inspect.FrameInfo] = getattr(\n            task, \"__pw_stack__\", None\n        ) or inspect.stack(0)\n    \n        parsed_st = _extract_stack_trace_information_from_stack(st, is_internal, title)\n        self._api_zone.set(parsed_st)\n        try:\n            return await cb()\n        except Exception as error:\n>           raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\nE           playwright._impl._errors.Error: Page.goto: net::ERR_NAME_NOT_RESOLVED at http://localhost:9000/\nE           Call log:\nE             - navigating to \"http://localhost:9000/\", waiting until \"load\"\n\n../../../../.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/playwright/_impl/_connection.py:559: Error","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"[S] Pytestconfig","time":{"start":1771492209906,"stop":1771492209906,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Delete Output Dir","time":{"start":1771492209906,"stop":1771492209906,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S]  Verify Url","time":{"start":1771492209906,"stop":1771492209906,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S]  Session Faker","time":{"start":1771492209906,"stop":1771492209968,"duration":62},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Base Url","time":{"start":1771492209906,"stop":1771492209906,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Envs","time":{"start":1771492209968,"stop":1771492209970,"duration":2},"status":"passed","steps":[],"attachments":[{"uid":"db84013837b79ad2","name":"envs.json","source":"db84013837b79ad2.json","type":"application/json","size":456}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"[S] Auth Token","time":{"start":1771492209970,"stop":1771492210259,"duration":289},"status":"broken","statusMessage":"requests.exceptions.HTTPError: 400 Client Error:  for url: http://localhost:9000/oauth2/authorize?response_type=code&client_id=client&scope=openid&redirect_uri=http%3A%2F%2Flocalhost%2Fauthorized&code_challenge=hUu-nlCBDp8qBV17RTX5M-HRH94VYFdRaXposkZbQkk&code_challenge_method=S256\n\n<!DOCTYPE HTML>\n\n<html lang=\"ru\" xmlns=\"http://www.w3.org/1999/xhtml\">\n\n<head>\n\n    <title>Niffler auth error page</title>\n\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n\n    <link rel=\"icon\" href=\"images/favicon.ico\"/>\n\n    <link href=\"styles/styles.css\" rel=\"stylesheet\"\n\n          type=\"text/css\"/>\n\n</head>\n\n<body>\n\n<main class=\"content\">\n\n    <div class=\"content__wrapper\">\n\n        <div class=\"main__hero\"></div>\n\n        <section class=\"main__form\">\n\n            <div class=\"logo-section\">\n\n                <img class=\"logo-section__logo\" src=\"images/coin.svg\" width=\"36\" alt=\"Niffler logo\"/>\n\n                <p class=\"logo-section__text\">\n\n                    Oops, an error occurred :(\n\n                </p>\n\n            </div>\n\n            <div class=\"form-section\">\n\n                <div class=\"form\" id=\"error-form\">\n\n                    <h1 class=\"header\">Code: 400</h1>\n\n                    <div class=\"form__error-container\">\n\n                        <p class=\"form__error\">Unknown error</p>\n\n                    </div>\n\n                    <p class=\"header__additional\">\n\n                        Let`s start from the <a class=\"form__link\" href=\"http://frontend.niffler.dc/main\">Niffler main page</a>\n\n                    </p>\n\n                </div>\n\n            </div>\n\n        </section>\n\n    </div>\n\n</main>\n\n</body>\n\n</html>\n\n\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/_pytest/setuponly.py\", line 36, in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/pluggy/_callers.py\", line 53, in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/pluggy/_result.py\", line 103, in get_result\n    raise exc.with_traceback(tb)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/pluggy/_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/_pytest/fixtures.py\", line 1196, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/_pytest/fixtures.py\", line 930, in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n                     ^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/fixtures/auth_fixtures.py\", line 8, in auth_token\n    return OAuthClient(envs).get_token(envs.niffler_username, envs.niffler_password)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/clients/oauth_client.py\", line 27, in get_token\n    self.session.get(\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/requests/sessions.py\", line 602, in get\n    return self.request(\"GET\", url, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/utils/sessions.py\", line 11, in wrapper\n    response.raise_for_status()\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/requests/models.py\", line 1026, in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\n","steps":[{"name":"GET /oauth2/authorize","time":{"start":1771492209981,"stop":1771492210259,"duration":278},"status":"passed","steps":[],"attachments":[{"uid":"6feb56d93fdcb450","name":"SOAP Response","source":"6feb56d93fdcb450.xml","type":"application/xml","size":1338},{"uid":"cff83125e485e4d","name":"Request","source":"cff83125e485e4d.html","type":"text/html","size":2298},{"uid":"658f91c12cb2f126","name":"Response 400","source":"658f91c12cb2f126.html","type":"text/html","size":3758},{"uid":"b8f0f9af065552ae","name":"Response text 400","source":"b8f0f9af065552ae.txt","type":"text/plain","size":1338}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":4,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":1,"shouldDisplayMessage":true,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},{"name":"[S] Playwright","time":{"start":1771492211601,"stop":1771492211890,"duration":289},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Browser Type Launch Args","time":{"start":1771492211601,"stop":1771492211601,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Browser","time":{"start":1771492211891,"stop":1771492212110,"duration":219},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Launch Browser","time":{"start":1771492211891,"stop":1771492211891,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Browser Type","time":{"start":1771492211891,"stop":1771492211891,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Connect Options","time":{"start":1771492211891,"stop":1771492211891,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Tmp Path Factory","time":{"start":1771492212710,"stop":1771492212710,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Setup Auth State","time":{"start":1771492212710,"stop":1771492212851,"duration":141},"status":"broken","statusMessage":"playwright._impl._errors.Error: Page.goto: net::ERR_NAME_NOT_RESOLVED at http://localhost:9000/\nCall log:\n  - navigating to \"http://localhost:9000/\", waiting until \"load\"\n\n","statusTrace":"  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/_pytest/setuponly.py\", line 36, in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/pluggy/_callers.py\", line 139, in _multicall\n    teardown.throw(exception)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/pluggy/_callers.py\", line 53, in run_old_style_hookwrapper\n    return result.get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/pluggy/_result.py\", line 103, in get_result\n    raise exc.with_traceback(tb)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/pluggy/_callers.py\", line 38, in run_old_style_hookwrapper\n    res = yield\n          ^^^^^\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/pluggy/_callers.py\", line 121, in _multicall\n    res = hook_impl.function(*args)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/_pytest/fixtures.py\", line 1196, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/_pytest/fixtures.py\", line 923, in call_fixture_func\n    fixture_result = next(generator)\n                     ^^^^^^^^^^^^^^^\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/conftest.py\", line 54, in setup_auth_state\n    login_page.go_to(envs.auth_url)\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-e-2-e-tests-python/pages/base_page.py\", line 9, in go_to\n    self.page.goto(url)\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/playwright/sync_api/_generated.py\", line 9019, in goto\n    self._sync(\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n           ^^^^^^^^^^^^^\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/playwright/_impl/_page.py\", line 555, in goto\n    return await self._main_frame.goto(**locals_to_params(locals()))\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/playwright/_impl/_frame.py\", line 153, in goto\n    await self._channel.send(\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 69, in send\n    return await self._connection.wrap_api_call(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/runner/.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/playwright/_impl/_connection.py\", line 559, in wrap_api_call\n    raise rewrite_error(error, f\"{parsed_st['apiName']}: {error}\") from None\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"[S] Spend Db","time":{"start":1771492214708,"stop":1771492214709,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"browser::0","time":{"start":1771492214948,"stop":1771492214977,"duration":29},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright::0","time":{"start":1771492214979,"stop":1771492214986,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"story","value":"UI"},{"name":"feature","value":"Категории"},{"name":"host","value":"runnervmjduv7"},{"name":"thread","value":"10460-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.ui.test_categories"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"browser_name","value":"'chromium'"},{"name":"category","value":"'test_category'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"ac9d7b16a86a5ed7.json","parameterValues":["'chromium'","'test_category'"]}