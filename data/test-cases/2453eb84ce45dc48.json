{"uid":"2453eb84ce45dc48","name":"Получение списка категорий через API","fullName":"tests.api.test_categories_api.TestCategoryApi#test_get_categories_api","historyId":"679b557c6b9855b013704235a44802d3","time":{"start":1771495170104,"stop":1771495170104,"duration":0},"status":"broken","statusMessage":"requests.exceptions.HTTPError: 400 Client Error:  for url: http://localhost:9000/oauth2/authorize?response_type=code&client_id=client&scope=openid&redirect_uri=http%3A%2F%2Flocalhost%2Fauthorized&code_challenge=nUoSkIkhzFiSxbc_krkOmD83sA5HaUXY767mddBFBd4&code_challenge_method=S256\n<!DOCTYPE HTML>\n<html lang=\"ru\" xmlns=\"http://www.w3.org/1999/xhtml\">\n<head>\n    <title>Niffler auth error page</title>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <link rel=\"icon\" href=\"images/favicon.ico\"/>\n    <link href=\"styles/styles.css\" rel=\"stylesheet\"\n          type=\"text/css\"/>\n</head>\n<body>\n<main class=\"content\">\n    <div class=\"content__wrapper\">\n        <div class=\"main__hero\"></div>\n        <section class=\"main__form\">\n            <div class=\"logo-section\">\n                <img class=\"logo-section__logo\" src=\"images/coin.svg\" width=\"36\" alt=\"Niffler logo\"/>\n                <p class=\"logo-section__text\">\n                    Oops, an error occurred :(\n                </p>\n            </div>\n            <div class=\"form-section\">\n                <div class=\"form\" id=\"error-form\">\n                    <h1 class=\"header\">Code: 400</h1>\n                    <div class=\"form__error-container\">\n                        <p class=\"form__error\">Unknown error</p>\n                    </div>\n                    <p class=\"header__additional\">\n                        Let`s start from the <a class=\"form__link\" href=\"http://frontend.niffler.dc/main\">Niffler main page</a>\n                    </p>\n                </div>\n            </div>\n        </section>\n    </div>\n</main>\n</body>\n</html>","statusTrace":"envs = Envs(frontend_url='http://localhost', api_url='http://localhost:8090', auth_url='http://localhost:9000', spend_db_url=...localhost:8089/ws/userdata', kafka_address='localhost:9093', niffler_username='test_user', niffler_password='password')\ncreate_test_user_before_run = None\n\n    @pytest.fixture(scope=\"session\")\n    def auth_token(envs: Envs, create_test_user_before_run):\n>       return OAuthClient(envs).get_token(envs.niffler_username, envs.niffler_password)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\nfixtures/auth_fixtures.py:8: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nclients/oauth_client.py:27: in get_token\n    self.session.get(\n../../../../.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/requests/sessions.py:602: in get\n    return self.request(\"GET\", url, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nutils/sessions.py:11: in wrapper\n    response.raise_for_status()\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <Response [400]>\n\n    def raise_for_status(self):\n        \"\"\"Raises :class:`HTTPError`, if one occurred.\"\"\"\n    \n        http_error_msg = \"\"\n        if isinstance(self.reason, bytes):\n            # We attempt to decode utf-8 first because some servers\n            # choose to localize their reason strings. If the string\n            # isn't utf-8, we fall back to iso-8859-1 for all other\n            # encodings. (See PR #3538)\n            try:\n                reason = self.reason.decode(\"utf-8\")\n            except UnicodeDecodeError:\n                reason = self.reason.decode(\"iso-8859-1\")\n        else:\n            reason = self.reason\n    \n        if 400 <= self.status_code < 500:\n            http_error_msg = (\n                f\"{self.status_code} Client Error: {reason} for url: {self.url}\"\n            )\n    \n        elif 500 <= self.status_code < 600:\n            http_error_msg = (\n                f\"{self.status_code} Server Error: {reason} for url: {self.url}\"\n            )\n    \n        if http_error_msg:\n>           raise HTTPError(http_error_msg, response=self)\nE           requests.exceptions.HTTPError: 400 Client Error:  for url: http://localhost:9000/oauth2/authorize?response_type=code&client_id=client&scope=openid&redirect_uri=http%3A%2F%2Flocalhost%2Fauthorized&code_challenge=nUoSkIkhzFiSxbc_krkOmD83sA5HaUXY767mddBFBd4&code_challenge_method=S256\nE           <!DOCTYPE HTML>\nE           <html lang=\"ru\" xmlns=\"http://www.w3.org/1999/xhtml\">\nE           <head>\nE               <title>Niffler auth error page</title>\nE               <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\nE               <link rel=\"icon\" href=\"images/favicon.ico\"/>\nE               <link href=\"styles/styles.css\" rel=\"stylesheet\"\nE                     type=\"text/css\"/>\nE           </head>\nE           <body>\nE           <main class=\"content\">\nE               <div class=\"content__wrapper\">\nE                   <div class=\"main__hero\"></div>\nE                   <section class=\"main__form\">\nE                       <div class=\"logo-section\">\nE                           <img class=\"logo-section__logo\" src=\"images/coin.svg\" width=\"36\" alt=\"Niffler logo\"/>\nE                           <p class=\"logo-section__text\">\nE                               Oops, an error occurred :(\nE                           </p>\nE                       </div>\nE                       <div class=\"form-section\">\nE                           <div class=\"form\" id=\"error-form\">\nE                               <h1 class=\"header\">Code: 400</h1>\nE                               <div class=\"form__error-container\">\nE                                   <p class=\"form__error\">Unknown error</p>\nE                               </div>\nE                               <p class=\"header__additional\">\nE                                   Let`s start from the <a class=\"form__link\" href=\"http://frontend.niffler.dc/main\">Niffler main page</a>\nE                               </p>\nE                           </div>\nE                       </div>\nE                   </section>\nE               </div>\nE           </main>\nE           </body>\nE           </html>\n\n../../../../.cache/pypoetry/virtualenvs/niffler-e2e-tests-gpdX4pEC-py3.12/lib/python3.12/site-packages/requests/models.py:1026: HTTPError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"afterStages":[],"labels":[{"name":"story","value":"API"},{"name":"feature","value":"Категории"},{"name":"host","value":"runnervmjduv7"},{"name":"thread","value":"9609-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.api.test_categories_api"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"2453eb84ce45dc48.json","parameterValues":[]}